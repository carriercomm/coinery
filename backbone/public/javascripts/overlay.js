!function(){"use strict";var e="undefined"!=typeof window?window:global;if("function"!=typeof e.require){var t={},r={},n=function(e,t){return{}.hasOwnProperty.call(e,t)},i=function(e,t){var r,n,i=[];r=/^\.\.?(\/|$)/.test(t)?[e,t].join("/").split("/"):t.split("/");for(var a=0,o=r.length;o>a;a++)n=r[a],".."===n?i.pop():"."!==n&&""!==n&&i.push(n);return i.join("/")},a=function(e){return e.split("/").slice(0,-1).join("/")},o=function(t){return function(r){var n=a(t),o=i(n,r);return e.require(o,t)}},u=function(e,t){var n={id:e,exports:{}};return r[e]=n,t(n.exports,o(e),n),n.exports},s=function(e,a){var o=i(e,".");if(null==a&&(a="/"),n(r,o))return r[o].exports;if(n(t,o))return u(o,t[o]);var s=i(o,"./index");if(n(r,s))return r[s].exports;if(n(t,s))return u(s,t[s]);throw new Error('Cannot find module "'+e+'" from "'+a+'"')},c=function(e,r){if("object"==typeof e)for(var i in e)n(e,i)&&(t[i]=e[i]);else t[e]=r},l=function(){var e=[];for(var r in t)n(t,r)&&e.push(r);return e};e.require=s,e.require.define=c,e.require.register=c,e.require.list=l,e.require.brunch=!0}}(),require.register("overlay/start",function(){function e(e){return decodeURI((RegExp(e+"=(.+?)(&|$)").exec(location.search)||[,null])[1])}var t;t=function(e,t){return setTimeout(t,e)},$(function(){var r,n,i,a,o,u;return $(".overlay-container").addClass("visible"),i=e("id"),$.ajax("/api/products/"+i+"/buy",{async:!1,success:function(e){return window.product=e}}),a=window.product,$("[data-product-cover]").each(function(e,t){return $(t).attr("src",a.image_url)}),$("[data-price-btc]").each(function(e,t){return $(t).html(parseFloat(a.btc.toFixed(6)).toString())}),$("[data-price-usd]").each(function(e,t){return $(t).html(parseFloat(a.price.toFixed(2)).toString())}),$("[data-user-name]").each(function(e,t){return $(t).html(a.user.full_name)}),$("[data-product-title]").each(function(e,t){return $(t).html(a.title)}),$("[data-user-avatar]").each(function(e,t){return $(t).attr("src",a.user.img)}),$("[data-product-description]").each(function(e,t){return $(t).html(a.description)}),$("[data-product-details]").each(function(e,t){var r,n,i,o,u,s;for(i="You'll get ",i+=a.assets.length,1===a.assets.length&&(i+=" "+a.assets[0].asset_file_name.split(".")[1].toUpperCase()+" file"),n=0,s=a.assets,o=0,u=s.length;u>o;o++)r=s[o],n+=r.asset_file_size/1e3;return i+=", "+n.toFixed(0)+" kb total",$(t).html(i)}),t(200,function(){return $(".overlay").addClass("visible")}),u="https://coinbase.com/inline_payments/",r=function(e){return $(".panel-container").eq(e).removeClass("visible"),t(200,function(){return $(".panel-container").eq(e).hide(),$(".panel-container").eq(e+1).show(),$(".panel-container").eq(e+1).addClass("visible"),$("iframe").attr("src",u+a.button_code)}),1===e?($("iframe").remove(),t(100,function(){return $("input").focus()})):void 0},$('a[data-href="buy"]').click(function(){return r(0)}),o=function(e){var t,n;return"https://coinbase.com"===e.origin&&(n=e.data.split("|")[0],t=e.data.split("|")[1],"coinbase_payment_complete"===n)?(console.log("payment complete"),r(1)):void 0},window.addEventListener("message",o,!1),$('a[data-href="submit"]').click(function(){var e;return e=$("input").val(),""===e?void alert("Email address is required to download purchased files!"):$.ajax("/api/products/"+a.id+"/purchase?email="+encodeURIComponent(e),{method:"POST",success:function(){return r(2)()}})}),n="http://localhost:3000",$('a[data-href="close"]').click(function(){return window.parent.postMessage("close_preview",n)})})});