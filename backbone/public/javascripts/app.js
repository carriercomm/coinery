!function(){"use strict";var e="undefined"!=typeof window?window:global;if("function"!=typeof e.require){var t={},r={},n=function(e,t){return{}.hasOwnProperty.call(e,t)},o=function(e,t){var r,n,o=[];r=/^\.\.?(\/|$)/.test(t)?[e,t].join("/").split("/"):t.split("/");for(var i=0,s=r.length;s>i;i++)n=r[i],".."===n?o.pop():"."!==n&&""!==n&&o.push(n);return o.join("/")},i=function(e){return e.split("/").slice(0,-1).join("/")},s=function(t){return function(r){var n=i(t),s=o(n,r);return e.require(s,t)}},a=function(e,t){var n={id:e,exports:{}};return r[e]=n,t(n.exports,s(e),n),n.exports},c=function(e,i){var s=o(e,".");if(null==i&&(i="/"),n(r,s))return r[s].exports;if(n(t,s))return a(s,t[s]);var c=o(s,"./index");if(n(r,c))return r[c].exports;if(n(t,c))return a(c,t[c]);throw new Error('Cannot find module "'+e+'" from "'+i+'"')},u=function(e,r){if("object"==typeof e)for(var o in e)n(e,o)&&(t[o]=e[o]);else t[e]=r},p=function(){var e=[];for(var r in t)n(t,r)&&e.push(r);return e};e.require=c,e.require.define=u,e.require.register=u,e.require.list=p,e.require.brunch=!0}}(),require.register("app",function(e,t,r){var n,o,i;o=t("router"),i=t("models/user"),n=t("models/product"),r.exports={start:function(){var e,t;return t=new i({validated_session:!1}),e=function(){var e;return e=new o({user:t}),Backbone.history.start()},t.fetch({async:!1,success:function(){return t.setValidSession(),e()},error:function(){return e()}})}}}),require.register("collections/products",function(e,t,r){var n,o,i,s={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};n=t("models/product"),r.exports=o=function(e){function t(){return i=t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.url="/api/products",t.prototype.model=n,t.prototype.initialize=function(){},t}(Backbone.Collection)}),require.register("init",function(e,t){var r;r=t("app"),window.delay=function(e,t){return setTimeout(t,e)},window.api_root="http://www.coinery.io",window.cb_client_id="ed71f78e7a89b542777e77d93dc44a33c02bab2c855a4e9919c7db5ad50edb6a",window.debug=!(-1===window.location.hostname.indexOf("local")),window.debug&&(window.api_root="http://localhost:3000",window.cb_client_id="6941cf4b2f490600c5f4b0bc2f39ada655782a3487426948bf7a94858f40f0d2"),window.cb_auth_url="https://coinbase.com/oauth/authorize?client_id="+window.cb_client_id+"&redirect_uri="+encodeURIComponent(window.api_root+"/api/coinbase/auth/callback")+"&response_type=code&scope=merchant",window.sexyHash=function(){var e;return e=function(t){var r;return"#"!==(r=t.charAt(0))&&"/"!==r?"/"+t:e(t.slice(1))},location.hash=e(location.hash)},window.sexyHash(),jQuery.fn.selectText=function(){var e,t,r,n;e=document,t=this[0],e.body.createTextRange?(r=document.body.createTextRange(),r.moveToElementText(t),r.select()):window.getSelection&&(n=window.getSelection(),r=document.createRange(),r.selectNodeContents(t),n.removeAllRanges(),n.addRange(r))},$(function(){return $.ajaxSetup({type:"POST",data:{},dataType:"json",crossDomain:!0,xhrFields:{withCredentials:!0}}),Backbone.$=jQuery,Pace.start(),r.start()})}),require.register("models/product",function(e,t,r){var n,o,i={}.hasOwnProperty,s=function(e,t){function r(){this.constructor=e}for(var n in t)i.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r.exports=n=function(e){function t(){return o=t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.url=function(){return"/api/products"},t.prototype.urlRoot=function(){return"/api/products"},t.prototype.defaults={title:"",description:"",price:"0"},t.prototype.initialize=function(){},t.prototype.setTitle=function(e){return this.set("title",e)},t.prototype.getTitle=function(){return this.get("title")},t.prototype.setPrice=function(e){return this.set("price",e)},t.prototype.getPrice=function(){return this.get("price")},t.prototype.getDescription=function(){return this.get("description")},t.prototype.getCoverURL=function(){return this.get("image_url")},t.prototype.setDescription=function(e){return this.set("description",e)},t.prototype.setStatus=function(e){return this.set("status",e)},t.prototype.getPublished=function(){return 2===this.get("status")?!0:!1},t.prototype.getReadableStatus=function(){var e;switch(e="",this.get("status")){case 0:e="Not yet created";break;case 1:e="Draft";break;case 2:e="Published"}return e},t.prototype.setAssets=function(e){return this.set("assets",e)},t.prototype.getAssets=function(){return this.get("assets")},t.prototype.getAssetsFromServer=function(){var e=this;return $.ajax("/api/products/"+this.id+"/assets",{method:"GET",async:!1,success:function(t){return e.setAssets(t),e.trigger("fetched_assets")}})},t}(Backbone.Model)}),require.register("models/user",function(e,t,r){var n,o,i={}.hasOwnProperty,s=function(e,t){function r(){this.constructor=e}for(var n in t)i.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r.exports=n=function(e){function t(){return o=t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.url="/api/user",t.prototype.initialize=function(){},t.prototype.getName=function(){return this.get("full_name")},t.prototype.setValidSession=function(){return this.set("validated_session",!0)},t.prototype.getValidSession=function(){return this.get("validated_session")},t.prototype.getTwitterHandle=function(){return"@"+this.get("username")},t.prototype.getCoinbaseAuth=function(){return this.get("coinbase_auth")},t}(Backbone.Model)}),require.register("router",function(e,t,r){var n,o,i,s,a,c,u,p,l,d,f,h,v={}.hasOwnProperty,y=function(e,t){function r(){this.constructor=e}for(var n in t)v.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};f=t("views/nav"),l=t("views/products"),i=t("views/customers"),c=t("views/new"),n=t("views/account"),o=t("views/analytics"),a=t("views/login"),s=t("views/edit"),p=t("collections/products"),u=t("models/product"),r.exports=d=function(e){function t(){return h=t.__super__.constructor.apply(this,arguments)}return y(t,e),t.prototype.routes=function(){return{products:"productsHandler","products/new":"newProductHandler","products/edit/:id":"editProductHandler",customers:"customersHandler",analytics:"analyticsHandler",account:"accountHandler",login:"loginHandler","#*":"productsHandler"}},t.prototype.initialize=function(e){var t;return this.user=e.user,this.on("route",window.sexyHash),t=new f({model:this.user}),t.render(),this.on("route",function(e,r){return t.setActive(e.replace("Handler","")),console.log("routing to "+r)}),this.view=null},t.prototype.loginHandler=function(){var e;return this.session()?this.productsHandler():(e=new a({model:this.user}),void this.loadView(e))},t.prototype.editProductHandler=function(e){var t;return this.session()?(this.requireConversionRate(),this.requireProducts(),t=new s({user:this.user,model:this.products.get(e)}),void this.loadView(t)):this.requireLogin()},t.prototype.productsHandler=function(){var e;return this.session()?(this.requireProducts(),e=new l({user:this.user,collection:this.products}),void this.loadView(e)):this.requireLogin()},t.prototype.customersHandler=function(){var e;return this.session()?(e=new i({model:this.user}),void this.loadView(e)):this.requireLogin()},t.prototype.analyticsHandler=function(){var e;return this.session()?(e=new o({model:this.user}),void this.loadView(e)):this.requireLogin()},t.prototype.accountHandler=function(){var e;return this.session()?(e=new n({model:this.user}),void this.loadView(e)):this.requireLogin()},t.prototype.newProductHandler=function(){var e,t;return this.session()?(this.requireConversionRate(),this.requireProducts(),e=new u,t=new c({collection:this.products,user:this.user,model:e}),void this.loadView(t)):this.requireLogin()},t.prototype.loadView=function(e){var t,r,n=this;return r=function(e){return e?$(".main-container").addClass("visible"):$(".main-container").removeClass("visible")},t=function(){return n.view=e,n.view.render(),r(!0)},null!=this.view&&r(!1),this.view?delay(210,function(){return null!=n.view.killSubviews&&n.view.killSubviews(),n.view.undelegateEvents(),n.view.$el.html(""),t()}):(t(),void r(!0))},t.prototype.session=function(){return this.user.getValidSession()?!0:!1},t.prototype.requireLogin=function(){return Backbone.history.navigate("login",{trigger:!0})},t.prototype.requireProducts=function(){return null==this.products?(this.products=new p,this.products.fetch({async:!1})):void 0},t.prototype.requireConversionRate=function(){return null==window.conversion_rate?$.ajax("/api/coinbase/price",{method:"GET",async:!1,success:function(e){return window.conversion_rate=e}}):void 0},t}(Backbone.Router)}),require.register("templates/account",function(e,t,r){var n=Handlebars.template(function(e,t,r,n,o){return this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),o=o||{},'<div class="coming-soon" style="margin-top: 208px;">\n  <span class="cs-flag">Coming Soon!</span>\n  <p>The ability to actually log out of your account</p>\n</div>\n\n'});"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof r&&r&&r.exports&&(r.exports=n)}),require.register("templates/analytics",function(e,t,r){var n=Handlebars.template(function(e,t,r,n,o){return this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),o=o||{},'<div class="coming-soon" style="margin-top: 160px;">\n  <span class="cs-flag">Coming Soon!</span>\n  <p>See traffic to your products, conversions, sales and more!</p>\n</div>\n\n'});"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof r&&r&&r.exports&&(r.exports=n)}),require.register("templates/customers",function(e,t,r){var n=Handlebars.template(function(e,t,r,n,o){return this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),o=o||{},'<div class="coming-soon" style="margin-top: 118px;">\n  <span class="cs-flag">Coming Soon!</span>\n  <p>See your customers and purchases in realtime</p>\n</div>\n\n'});"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof r&&r&&r.exports&&(r.exports=n)}),require.register("templates/dropzone-edit",function(e,t,r){var n=Handlebars.template(function(e,t,r,n,o){return this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),o=o||{},'<div class="dz-preview dz-file-preview">\n  <div class="dz-progress" style="display: block">\n    <span class="dz-upload" data-dz-uploadprogress>\n      <span data-dz-name class="filename"></span>\n    </span>\n  </div>\n  <div class="dz-details">\n    <div class="dz-filename"><span data-dz-name>myfile.png</span></div>\n  </div>\n  <a class="delete small" data-href="remove-file">Delete</a>\n  <span class="dz-size" data-dz-size></span>\n</div>\n\n'});"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof r&&r&&r.exports&&(r.exports=n)}),require.register("templates/dropzone",function(e,t,r){var n=Handlebars.template(function(e,t,r,n,o){return this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),o=o||{},'<div class="dz-preview dz-file-preview">\n  <div class="dz-progress" style="display: block">\n    <span class="dz-upload" data-dz-uploadprogress>\n      <span data-dz-name class="filename"></span>\n    </span>\n  </div>\n  <div class="dz-details">\n    <div class="dz-filename"><span data-dz-name>myfile.png</span></div>\n  </div>\n  <div class="dz-success-mark"><span><i class="fa fa-check"></i></span></div>\n  <div class="dz-error-mark"><span><i class="fa fa-exclamation-circle"></i></span></div>\n  <div class="dz-meta">\n    <span class="dz-size" data-dz-size></span><span class="dz-error-msg" data-dz-errormessage></span>\n  </div>\n  <span class="dz-progress-percent"></span>\n</div>\n\n'});"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof r&&r&&r.exports&&(r.exports=n)}),require.register("templates/edit",function(e,t,r){var n=Handlebars.template(function(e,t,r,n,o){function i(){return'\n  <a data-href="coinbase-auth" class="coinery-cta" style="display: none;">\n    <img src="images/coinbase_cta@2x.png" width="603px" height="205px">\n  </a>\n'}function s(){return'\n    <a class="button small right" data-href="preview">Preview <i class="fa fa-external-link"></i></a>\n  '}function a(){return'\n    <a class="button small right" data-href="publish">Publish</a>\n  '}this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),o=o||{};var c,u,p="",l=this,d="function",f=this.escapeExpression;return c=r.unless.call(t,t&&t.has_coinbase_auth,{hash:{},inverse:l.noop,fn:l.program(1,i,o),data:o}),(c||0===c)&&(p+=c),p+='\n\n<header style="width: 600px;">\n  <h2 class="left"><strong style="letter-spacing: -1px;">',(u=r.title)?c=u.call(t,{hash:{},data:o}):(u=t&&t.title,c=typeof u===d?u.call(t,{hash:{},data:o}):u),p+=f(c)+"</strong> </h2>\n  ",c=r["if"].call(t,t&&t.published,{hash:{},inverse:l.program(5,a,o),fn:l.program(3,s,o),data:o}),(c||0===c)&&(p+=c),p+='\n  <a class="button small right gray" data-href="save">Save Draft</a>\n</header>\n\n<div class="overlay-container">\n</div>\n\n<div class="files-container">\n</div>\n\n<iframe class="preview-iframe" style="border: 0px; display: none;" src="" frameborder="0" scrolling="no" allowtransparency="true"></iframe>\n'});"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof r&&r&&r.exports&&(r.exports=n)}),require.register("templates/files",function(e,t,r){var n=Handlebars.template(function(e,t,r,n,o){return this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),o=o||{},'<header>\n  <h4>Add/Edit Files</h4>\n  <p> Files your customer can download after a successful purchase</p>\n  <a class="button small gray right" data-href="trigger-dz">Add Files</a>\n</header>\n<div class="dz-preview-container edit-view"></div>\n<span class="or" style="display: none;"> or, </span>\n<a data-href="dropzone" class="button small">Upload Files</a>\n\n'});"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof r&&r&&r.exports&&(r.exports=n)}),require.register("templates/login",function(e,t,r){var n=Handlebars.template(function(e,t,r,n,o){return this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),o=o||{},'<h2><strong>Login with Twitter</strong> to get started.</h2>\n<p><strong>Make money online with no effort.</strong>\n  With Coinery, you can effortlessly sell products with Bitcoin\n  as the payment method. Get started by connecting your Twitter account!\n  We are here to help if you need us.\n</p>\n<br>\n<a class="button twitter" href="/auth/twitter">Login with Twitter <i class="fa fa-twitter"></i></a>\n'});"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof r&&r&&r.exports&&(r.exports=n)}),require.register("templates/nav",function(e,t,r){var n=Handlebars.template(function(e,t,r,n,o){return this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),o=o||{},'<a data-href="products"><div class="logo"></div></a>\n<ul>\n  <li><a data-href="products">Products</a></li>\n  <li><a data-href="customers">Customers</a></li>\n  <li><a data-href="analytics">Analytics</a></li>\n  <li><a data-href="account">Account</a></li>\n</ul>\n'});"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof r&&r&&r.exports&&(r.exports=n)}),require.register("templates/new",function(e,t,r){var n=Handlebars.template(function(e,t,r,n,o){return this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),o=o||{},'<a data-href="back" class="back">\n  <i class="fa fa-angle-left"></i> Back to Products\n</a>\n\n<div class="fieldset">\n  <h4><strong>Enter a name for your product</strong></h4>\n  <div class="field">\n    <input required class="wide" type="text" placeholder="What are you selling?">\n    <a class="button attached" data-href="save">Save</a>\n  </div>\n  <span class="hint"><em>ie. My Special Ebook, David\'s Debut Album</em></span>\n</div>\n\n<div class="fieldset hidden">\n  <h4><strong>How much does it cost?</strong></h4>\n  <div class="field">\n    <div class="field-wrapper" data-currency="USD">\n      <input required class="currency" type="text" placeholder="$0">\n    </div>\n    <div class="field-wrapper" data-currency="BTC">\n      <input required class="currency" type="text" placeholder="0.00">\n    </div>\n    <a class="button" data-href="save">Save</a>\n  </div>\n</div>\n\n<div class="fieldset hidden">\n  <h4><strong>Last step! Upload a file for your product</strong></h4>\n  <p class="hint">The customer will receive these files after a successful purchase.<p>\n  <div class="dz-preview-container"></div>\n  <a data-href="done" class="button" style="display: none;">Create Product</a>\n  <span class="or" style="display: none;"> or, </span>\n  <a data-href="dropzone" class="button plain">Upload Files</a>\n</div>\n\n'});"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof r&&r&&r.exports&&(r.exports=n)}),require.register("templates/overlay",function(e,t,r){var n=Handlebars.template(function(e,t,r,n,o){function i(){return"published"}function s(){return'\n      <span class="status">Live</span>\n    '}function a(){return'\n      <span class="status">Draft</span>\n    '}function c(e,t){var n,o,i="";return i+='\n      <img class="cover-photo" src="',(o=r.cover)?n=o.call(e,{hash:{},data:t}):(o=e&&e.cover,n=typeof o===v?o.call(e,{hash:{},data:t}):o),i+=y(n)+'">\n      <div class="cover-container">\n        <a class="button dark corner" data-href="cover-dropzone">Change Cover Photo</a>\n        <div style="display: none;" class="dz-cover-preview-container"></div>\n      </div>\n      '}function u(){return'\n        <div class="cover-container">\n          <img class="cam" src="images/camera.svg"><br>\n          <a class="button dark" data-href="cover-dropzone">Upload Cover Photo<i class="fa fa-cloud-upload"></i></a>\n          <div style="display: none;" class="dz-cover-preview-container"></div>\n        </div>\n      '}function p(e,t){var n,o;return(o=r.description)?n=o.call(e,{hash:{},data:t}):(o=e&&e.description,n=typeof o===v?o.call(e,{hash:{},data:t}):o),n||0===n?n:""}function l(){return"Add a description of your product..."}this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),o=o||{};var d,f,h="",v="function",y=this.escapeExpression,g=this;return h+='<div class="overlay">\n  <div class="flag ',d=r["if"].call(t,t&&t.published,{hash:{},inverse:g.noop,fn:g.program(1,i,o),data:o}),(d||0===d)&&(h+=d),h+='">\n    ',d=r["if"].call(t,t&&t.published,{hash:{},inverse:g.program(5,a,o),fn:g.program(3,s,o),data:o}),(d||0===d)&&(h+=d),h+='\n    <img src="images/flag.svg" width="81" height="81">\n  </div>\n  <div class="cover">\n      ',d=r["if"].call(t,t&&t.cover,{hash:{},inverse:g.program(9,u,o),fn:g.program(7,c,o),data:o}),(d||0===d)&&(h+=d),h+='\n  </div>\n  <div class="product-main">\n    <div class="unsaved">\n      <span class="warning">Warning</span>\n      <p>Don\'t forget to save your changes!</p>\n    </div>\n    <div class="field-container">\n      <div class="title-container">\n        <input class="title" data-id="title" value="',(f=r.title)?d=f.call(t,{hash:{},data:o}):(f=t&&t.title,d=typeof f===v?f.call(t,{hash:{},data:o}):f),h+=y(d)+'">\n      </div>\n      <div class="price-container">\n        <div class="field-wrapper" data-currency="BTC">\n          <input class="btc" type="text">\n        </div>\n        <div class="field-wrapper" data-currency="USD">\n          <input data-id="price" class="usd" type="text">\n        </div>\n      </div>\n    </div>\n    <div data-id="description" class="description" contenteditable>',d=r["if"].call(t,t&&t.description,{hash:{},inverse:g.program(13,l,o),fn:g.program(11,p,o),data:o}),(d||0===d)&&(h+=d),h+="</div>\n  </div>\n</div>\n\n"});"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof r&&r&&r.exports&&(r.exports=n)}),require.register("templates/products",function(e,t,r){var n=Handlebars.template(function(e,t,r,n,o){function i(e,t){var n,o="";return o+='\n  <header>\n    <h2 class="left">My Products</h2>\n    <a data-href="new-product" class="button small right">New Product</a>\n  </header>\n  <ul class="products-list">\n    ',n=r.each.call(e,e&&e.products,{hash:{},inverse:v.noop,fn:v.program(2,s,t),data:t}),(n||0===n)&&(o+=n),o+='\n    <li class="new">\n      <a class="cover" data-href="new-product">\n        <div class="product-cover">\n          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" width="42px" height="42px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve">\n          <polygon style="fill:#010101;" points="100,37.5 62.5,37.5 62.5,0 37.5,0 37.5,37.5 0,37.5 0,62.5 37.5,62.5 37.5,100 62.5,100   62.5,62.5 100,62.5 "/>\n          </svg>\n        </div>\n      </a>\n      <div class="product-meta">\n        <div class="title-container">\n          <h3 style="visibility: hidden;">New</h3>\n        </div>\n        <span class="status" style="visibility: hidden;">\n          Published\n        </span>\n      </div>\n    </li>\n</ul>\n'}function s(e,t){var n,o,i="";return i+='\n      <li class="product-container" data-product-id="',(o=r.id)?n=o.call(e,{hash:{},data:t}):(o=e&&e.id,n=typeof o===f?o.call(e,{hash:{},data:t}):o),i+=h(n)+'">\n        <a class="cover" data-href="edit-product">\n          <div class="product-cover">\n            <div class="price-container">\n              <h4>',(o=r.price)?n=o.call(e,{hash:{},data:t}):(o=e&&e.price,n=typeof o===f?o.call(e,{hash:{},data:t}):o),i+=h(n)+"</h4>\n            </div>\n            ",n=r["if"].call(e,e&&e.cover,{hash:{},inverse:v.program(5,c,t),fn:v.program(3,a,t),data:t}),(n||0===n)&&(i+=n),i+='\n          </div>\n        </a>\n        <div class="product-meta">\n          <div class="dropdown">\n            <a class="dropdown-toggle">\n              <i class="fa fa-cog"></i>\n              <i class="fa fa-chevron-down"></i>\n            </a>\n            <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">\n              <li>\n                <a data-href="edit-product">\n                  Edit Product\n                </a>\n              </li>\n              <li>\n                <a data-href="delete">\n                  Delete\n                </a>\n              </li>\n            </ul>\n          </div>\n          <div class="title-container">\n            <h3>',(o=r.title)?n=o.call(e,{hash:{},data:t}):(o=e&&e.title,n=typeof o===f?o.call(e,{hash:{},data:t}):o),i+=h(n)+'</h3>\n          </div>\n          <span class="status">\n            ',(o=r.status)?n=o.call(e,{hash:{},data:t}):(o=e&&e.status,n=typeof o===f?o.call(e,{hash:{},data:t}):o),i+=h(n)+"\n          </span>\n        </div>\n      </li>\n    "}function a(e,t){var n,o,i="";return i+='\n              <img src="',(o=r.cover)?n=o.call(e,{hash:{},data:t}):(o=e&&e.cover,n=typeof o===f?o.call(e,{hash:{},data:t}):o),i+=h(n)+'">\n            '}function c(){return'\n              <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" width="70px" height="70px" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve">\n                <path id="package" d="M17.578,22.504l-1.758-4.129l-2.007,4.752l-7.519-3.289l0.174,3.905l9.437,4.374l10.91-5.365l-0.146-4.988  L17.578,22.504z M29.954,7.119L19.021,3.883l-3.006,2.671l-3.091-2.359L2.046,8.699l3.795,3.048l-3.433,5.302l10.879,4.758  l2.53-5.999l2.257,5.308l11.393-5.942l-3.105-4.709L29.954,7.119z M15.777,15.079l-9.059-3.83l9.275-4.101l9.608,3.255  L15.777,15.079z"/>\n              </svg>\n            '}function u(e,t){var n,o="";return o+='\n  <div class="prompt"></div>\n  <a data-href="products/new" class="button create-button">Create a Product<span class="plus">+</span></a>\n  <h2>\n    <strong>\n      Hey ',n=r["if"].call(e,e&&e.username,{hash:{},inverse:v.noop,fn:v.program(8,p,t),data:t}),(n||0===n)&&(o+=n),o+="!\n    </strong>\n    Welcome to Coinery\n  </h2>\n  <p>\n    Thanks for trying out Coinery.\n    With Coinery, you can <strong>effortlessly sell products with Bitcoin\n    as the payment method.</strong> Get started by creating your first\n    product! We are here to help if you need us.\n  </p>\n  <p>\n    - The Coinery Team\n  </p>\n  <br><br>\n\n  <a href=\"https://twitter.com/CoineryApp\" class=\"twitter-follow-button\" data-show-count=\"false\" data-dnt=\"true\">Follow @CoineryApp</a>\n  <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>\n\n"}function p(e,t){var n,o;return(o=r.username)?n=o.call(e,{hash:{},data:t}):(o=e&&e.username,n=typeof o===f?o.call(e,{hash:{},data:t}):o),h(n)}this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),o=o||{};var l,d="",f="function",h=this.escapeExpression,v=this;return l=r["if"].call(t,t&&t.products,{hash:{},inverse:v.program(7,u,o),fn:v.program(1,i,o),data:o}),(l||0===l)&&(d+=l),d+="\n"});"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof r&&r&&r.exports&&(r.exports=n)}),require.register("views/account",function(e,t,r){var n,o,i,s={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};o=t("templates/account"),r.exports=n=function(e){function t(){return i=t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.el=".content",t.prototype.events=function(){},t.prototype.initialize=function(){return this.user=this.model},t.prototype.render=function(){var e;return e={},this.$el.html(o(e))},t}(Backbone.View)}),require.register("views/analytics",function(e,t,r){var n,o,i,s={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};o=t("templates/analytics"),r.exports=n=function(e){function t(){return i=t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.el=".content",t.prototype.initialize=function(){return this.user=this.model},t.prototype.render=function(){var e;return e={},this.$el.html(o(e))},t}(Backbone.View)}),require.register("views/customers",function(e,t,r){var n,o,i,s={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};o=t("templates/customers"),r.exports=n=function(e){function t(){return i=t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.el=".content",t.prototype.events=function(){return{"click a":"linkHandler"}},t.prototype.initialize=function(){return this.user=this.model},t.prototype.render=function(){var e;return e={},this.$el.html(o(e))},t.prototype.linkHandler=function(e){var t;return e.preventDefault(),t=$(e.target).attr("data-href"),Backbone.history.navigate(t)},t}(Backbone.View)}),require.register("views/edit",function(e,t,r){var n,o,i,s,a,c={}.hasOwnProperty,u=function(e,t){function r(){this.constructor=e}for(var n in t)c.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};i=t("views/overlay"),o=t("views/files"),s=t("templates/edit"),r.exports=n=function(e){function t(){return a=t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.el=".content",t.prototype.events=function(){return{'click a[data-href="save"]':"saveHandler",'click a[data-href="publish"]':"publishHandler",'click a[data-href="preview"]':"previewHandler",'click a[data-href="coinbase-auth"]':"coinbaseAuthHandler"}},t.prototype.initialize=function(e){return this.user=e.user},t.prototype.render=function(){var e;return e={title:this.model.getTitle(),description:this.model.getDescription(),has_coinbase_auth:this.user.getCoinbaseAuth(),published:this.model.getPublished()},this.$el.html(s(e)),this.renderSubviews()},t.prototype.renderSubviews=function(){return this.renderOverlay(),this.renderFiles()},t.prototype.previewHandler=function(){var e=this;return $(".olrk-noquirks").hide(),$(".preview-iframe").show(),$(".preview-iframe").attr("src","/products?id="+this.model.id),window.addEventListener("message",function(t){return"close_preview"===t.data?e.resetPreview():void 0},!1)},t.prototype.resetPreview=function(){return $(".preview-iframe").fadeOut()},t.prototype.killSubviews=function(){var e,t,r,n,o;for(n=[this.overlay,this.files],o=[],t=0,r=n.length;r>t;t++)e=n[t],null!=e?(e.undelegateEvents(),o.push(e.$el.html(""))):o.push(void 0);return o},t.prototype.saveHandler=function(){var e,t,r,n=this;return r=$('input[data-id="title"]').val(),this.model.setTitle(r),t=$('input[data-id="price"]').val().replace("$",""),this.model.setPrice(t),e=$('div[data-id="description"]').html(),this.model.setDescription(e),this.model.save({},{url:"/api/products/"+this.model.id,async:!1,success:function(){return n.overlay.render()}})},t.prototype.publishHandler=function(e){var t=this;return e.preventDefault(),this.saveHandler(),this.user.getCoinbaseAuth()||this.$(".coinery-cta").show(function(){$(this).addClass("visible")}),this.model.setStatus(2),this.model.save({},{url:"/api/products/"+this.model.get("id")+"/publish",success:function(){return t.render()}})},t.prototype.renderOverlay=function(){return null==this.overlay&&(this.overlay=new i({user:this.user,model:this.model})),this.overlay.render()},t.prototype.renderFiles=function(){return null==this.files&&(this.files=new o({user:this.user,model:this.model})),this.files.render()},t.prototype.coinbaseAuthHandler=function(e){var t=this;return e.preventDefault(),window.open(window.cb_auth_url),window.addEventListener("focus",function(){return t.user.fetch({success:function(){return t.user.getCoinbaseAuth?t.render():void 0}})},!1)},t}(Backbone.View)}),require.register("views/files",function(e,t,r){var n,o,i,s,a={}.hasOwnProperty,c=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};i=t("templates/files"),n=t("templates/dropzone-edit"),r.exports=o=function(e){function t(){return s=t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.el=".files-container",t.prototype.events=function(){return{'click a[data-href="remove-file"]':"fileDeleteHandler",'click a[data-href="trigger-dz"]':"triggerDropzoneHandler"}},t.prototype.initialize=function(e){return this.user=e.user,this.model.getAssetsFromServer(),this.dropzone=null},t.prototype.render=function(){return this.$el.html(i({})),this.dropzoneInit()},t.prototype.triggerDropzoneHandler=function(e){return e.preventDefault(),console.log("trying this"),window.jQuery('a[data-href="dropzone"]')[0].click()},t.prototype.dropzoneInit=function(){var e,t,r,o,i,s,a,c,u,p=this;for(o=function(e){var t;return e>=Math.pow(1024,4)/10?(e/=Math.pow(1024,4)/10,t="TB"):e>=Math.pow(1024,3)/10?(e/=Math.pow(1024,3)/10,t="GB"):e>=Math.pow(1024,2)/10?(e/=Math.pow(1024,2)/10,t="MB"):e>=102.4?(e/=102.4,t="KB"):(e=10*e,t="b"),"<strong>"+Math.round(e)/10+"</strong>"+t},Dropzone.prototype.filesize=o,t=new Dropzone('a[data-href="dropzone"]',{paramName:"asset",previewsContainer:".dz-preview-container",previewTemplate:n({}),url:"#"}),s=function(){return"/api/products/"+p.model.get("id")+"/assets"},t.options.url=s(),u=this.model.getAssets(),a=0,c=u.length;c>a;a++)e=u[a],r={},r.name=e.asset_file_name,r.size=e.asset_file_size,r.id=e.id,t.emit("addedfile",r),t.emit("success",r),t.files.push(r);return i=function(){var e,n,o,i;for(o=t.files,i=[],e=0,n=o.length;n>e;e++)r=o[e],i.push(r.previewElement.setAttribute("data-file-id",r.id));
return i},i(),t.on("success",function(e,t){return e.id=t.id,i()}),this.dropzone=t},t.prototype.fileDeleteHandler=function(e){var t,r,n=this;return t=$(e.target).closest(".dz-preview"),r=t.attr("data-file-id"),console.log(this.dropzone.files),this.dropzone.files.length<2?void alert("You're product must have at least one file!"):$.ajax("/api/assets/"+r,{type:"DELETE",success:function(){return n.model.getAssetsFromServer(),n.render()}})},t.prototype.backHandler=function(){return Backbone.history.navigate("products",{trigger:!0})},t}(Backbone.View)}),require.register("views/login",function(e,t,r){var n,o,i,s={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};o=t("templates/login"),r.exports=n=function(e){function t(){return i=t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.el=".content",t.prototype.events=function(){},t.prototype.initialize=function(){return this.user=this.model},t.prototype.render=function(){return this.$el.html(o({}))},t}(Backbone.View)}),require.register("views/nav",function(e,t,r){var n,o,i,s={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};o=t("templates/nav"),r.exports=n=function(e){function t(){return i=t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.el=".nav-container",t.prototype.events=function(){return{"click a":"navHandler"}},t.prototype.initialize=function(){return this.user=this.model},t.prototype.render=function(){var e;return e={},this.$el.html(o(e))},t.prototype.navHandler=function(e){var t;return e.preventDefault(),t=$(e.target).attr("data-href"),Backbone.history.navigate(t,{trigger:!0})},t.prototype.setActive=function(e){return this.$("li").removeClass("current"),$("a[data-href="+e+"]").parent().addClass("current")},t}(Backbone.View)}),require.register("views/new",function(e,t,r){var n,o,i,s,a={}.hasOwnProperty,c=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};i=t("templates/new"),n=t("templates/dropzone"),r.exports=o=function(e){function t(){return s=t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.el=".content",t.prototype.events=function(){return{'click a[data-href="back"]':"backHandler",'click a[data-href="save"]':"saveHandler",'click a[data-href="done"]':"doneHandler","keyup input.currency":"currencyHandler","keydown input.currency":"currencyValidateHandler","focus input":"inputFocusHandler"}},t.prototype.initialize=function(e){return this.user=e.user},t.prototype.render=function(){return this.$el.html(i({})),this.postRender()},t.prototype.postRender=function(){return this.$("input").focus()},t.prototype.saveHandler=function(e){var t,r,n,o,i,s=this;if(e.preventDefault(),t=$(e.target).closest(".fieldset"),n=t.index(),r=0,t.find("[required]").each(function(e,t){return $(t).removeClass("error"),""===$(t).val()?($(t).addClass("error"),r++):void 0}),!(r>0)){switch(o=t.find("input").first().val(),n){case 1:this.model.setTitle(o);break;case 2:this.model.setPrice(o.replace("$","")),this.model.save({},{async:!1,success:function(){return s.dropzoneInit()},error:function(e,t){return console.log(e,t)}})}null!=(i=t.addClass("complete").next().removeClass("hidden").find("input"))&&i.first().focus()}return!1},t.prototype.inputFocusHandler=function(e){return $(e.target).closest(".fieldset").removeClass("complete")},t.prototype.currencyHandler=function(e){var t,r,n,o,i,s,a;if(190!==e.keyCode)return o={btc:$('[data-currency="BTC"] input'),usd:$('[data-currency="USD"] input')},n=$(e.target).parent().attr("data-currency"),i=window.conversion_rate,i||(i=1/540),s=$(e.target).val().replace("$",""),t=parseFloat(s),"BTC"===n&&(a=t/i,isNaN(a)||(o.usd.addClass("changing"),delay(150,function(){return o.usd.val("$"+a.toFixed(2).toString())}),delay(300,function(){return o.usd.removeClass("changing")}))),"USD"!==n||(r=t*i,isNaN(r)||(o.btc.addClass("changing"),delay(150,function(){return o.btc.val(parseFloat(r.toFixed(5)))}),delay(300,function(){return o.btc.removeClass("changing")})),isNaN(t))?void 0:o.usd.val("$"+t.toString())},t.prototype.dropzoneInit=function(){var e,t,r,o=this;return t=function(e,t){var r,n,o,i,s;for(o=e.previewElement.querySelectorAll("[data-dz-uploadprogress]"),s=""+(100-parseInt(t))+"%",i=[],r=0;r<o.length;)n=o[r],i.push(n.style.width=s),r++;return i},e=function(e){var t;return e>=Math.pow(1024,4)/10?(e/=Math.pow(1024,4)/10,t="TB"):e>=Math.pow(1024,3)/10?(e/=Math.pow(1024,3)/10,t="GB"):e>=Math.pow(1024,2)/10?(e/=Math.pow(1024,2)/10,t="MB"):e>=102.4?(e/=102.4,t="KB"):(e=10*e,t="b"),"<strong>"+Math.round(e)/10+"</strong>"+t},Dropzone.prototype.defaultOptions.uploadprogress=t,Dropzone.prototype.filesize=e,this.dropzone=new Dropzone('a[data-href="dropzone"]',{paramName:"asset",previewsContainer:".dz-preview-container",previewTemplate:n({}),url:"#"}),r=function(){return"/api/products/"+o.model.get("id")+"/assets"},this.dropzone.options.url=r(),this.dropzone.on("uploadprogress",function(e,t){return $(".dz-progress-percent").text(Math.round(t-1)+"%")}),this.dropzone.on("addedFile",function(e){return console.log(e)}),this.dropzone.on("success",function(){return o.updateFileCTA()})},t.prototype.updateFileCTA=function(){return this.$('a[data-href="dropzone"]').removeClass("button").html("Upload Another File"),this.$("span.or").fadeIn(),this.$('a[data-href="done"]').fadeIn()},t.prototype.doneHandler=function(e){var t=this;return e.preventDefault(),this.collection.add(this.model),this.model.save({status:1},{url:"/api/products/"+this.model.id,success:function(){return Backbone.history.navigate("products/edit/"+t.model.id,{trigger:!0}),console.log(t.model)}})},t.prototype.backHandler=function(){return Backbone.history.navigate("products",{trigger:!0})},t}(Backbone.View)}),require.register("views/overlay",function(e,t,r){var n,o,i,s={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};o=t("templates/overlay"),r.exports=n=function(e){function t(){return i=t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.el=".overlay-container",t.prototype.events=function(){return{"focus input":"inputFocusHandler","blur input":"resetFocus","click [contenteditable]":"contentEditableFocus","keyup .field-wrapper input":"currencyHandler","keydown .field-wrapper input":"currencyValidateHandler",keydown:"showWarning"}},t.prototype.initialize=function(e){return this.user=e.user,this.warningVisible=!1,console.log(this.model)},t.prototype.render=function(){var e;return e={id:this.model.id,title:this.model.getTitle(),description:this.model.getDescription(),cover:this.model.getCoverURL(),price:this.model.getPrice(),user_name:this.user.getName(),published:this.model.getPublished()},this.$el.html(o(e)),this.postRender()},t.prototype.showWarning=function(){return this.warningVisible?void 0:$(".unsaved").addClass("visible")},t.prototype.postRender=function(){return this.dropzoneInit(),this.fillPrice()},t.prototype.fillPrice=function(){var e,t,r,n,o;n=window.conversion_rate,n||(n=1/540),r=this.model.getPrice(),null!=r&&(t=r*n,o=parseFloat(r).toFixed(2),e=parseFloat(t.toFixed(3)),$('[data-currency="BTC"] input').val(e),$('[data-currency="USD"] input').val(o))},t.prototype.resetFocus=function(){return this.$(".price-container").removeClass("usd-focus btc-focus focus"),this.$(".field-container").removeClass("editing-price"),this.$(".title-container").removeClass("focus"),this.$(".description").removeClass("focus")},t.prototype.contentEditableFocus=function(e){return $(e.target).addClass("focus"),/Add a description/.test($(e.target).html())?$(e.target).selectText():void 0},t.prototype.inputFocusHandler=function(e){var t;return this.resetFocus(),"usd"===(t=e.target.className)||"btc"===t?(this.$(".price-container").addClass(""+e.target.className+"-focus focus"),this.$(".field-container").addClass("editing-price")):this.$(".title-container").addClass("focus")},t.prototype.currencyHandler=function(e){var t,r,n,o,i,s,a;if(190!==e.keyCode)return o={btc:$('[data-currency="BTC"] input'),usd:$('[data-currency="USD"] input')},n=$(e.target).parent().attr("data-currency"),i=window.conversion_rate,i||(i=1/540),s=$(e.target).val().replace("$",""),t=parseFloat(s),"BTC"===n&&(a=t/i,isNaN(a)||(o.usd.addClass("changing"),console.log("changing"),delay(150,function(){return o.usd.val("$"+a.toFixed(2).toString())}),delay(300,function(){return o.usd.removeClass("changing")}))),"USD"!==n||(r=t*i,isNaN(r)||(o.btc.addClass("changing"),delay(150,function(){return o.btc.val(parseFloat(r.toFixed(5)))}),delay(300,function(){return o.btc.removeClass("changing")})),isNaN(t))?void 0:o.usd.val("$"+t.toString())},t.prototype.dropzoneInit=function(){var e,t=this;return e=new Dropzone('a[data-href="cover-dropzone"]',{previewsContainer:".dz-cover-preview-container",url:"/api/products/"+this.model.get("id"),paramName:"image",method:"put"}),e.on("uploadprogress",function(e,t){return $(".dz-progress-percent").text(Math.round(t)+"%")}),e.on("addedFile",function(e){return console.log(e)}),e.on("success",function(){return delay(500,function(){return t.model.fetch({url:"/api/products/"+t.model.get("id"),success:function(){return t.render()}})})})},t.prototype.backHandler=function(){return Backbone.history.navigate("products",{trigger:!0})},t}(Backbone.View)}),require.register("views/products",function(e,t,r){var n,o,i,s={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};o=t("templates/products"),r.exports=n=function(e){function t(){return i=t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.el=".content",t.prototype.events=function(){return{"click a":"linkHandler",'click a[data-href="delete"]':"deleteHandler",'click a[data-href="edit-product"]':"editHandler",'click a[data-href="new-product"]':"newHandler"}},t.prototype.initialize=function(e){return this.user=e.user},t.prototype.render=function(){var e,t,r,n,i,s;for(console.log("render"),e={username:this.user.getTwitterHandle(),products:[]},s=this.collection.models,n=0,i=s.length;i>n;n++)t=s[n],r={},r.id=t.id,r.title=t.getTitle(),r.price=t.getPrice(),r.cover=t.getCoverURL(),r.status=t.getReadableStatus(),e.products.push(r);return this.$el.html(o(e)),this.postRender()},t.prototype.postRender=function(){return this.$("ul.products-list li").each(function(e,t){return $(t).find(".dropdown-toggle").dropdown()})},t.prototype.deleteHandler=function(e){var t,r,n,o=this;return e.preventDefault(),t=$(e.target).closest("li.product-container"),r=t.attr("data-product-id"),n=this.collection.get(r),n.destroy({url:"/api/products/"+r,success:function(){return o.collection.remove(n),t.fadeOut(function(){return o.render()})}})},t.prototype.newHandler=function(){return Backbone.history.navigate("products/new",{trigger:!0})},t.prototype.editHandler=function(e){var t;return e.preventDefault(),t=$(e.target).closest("li.product-container").attr("data-product-id"),Backbone.history.navigate("products/edit/"+t,{trigger:!0})},t.prototype.linkHandler=function(e){var t;return e.preventDefault(),t=$(e.target).attr("data-href"),Backbone.history.navigate(t,{trigger:!0})},t}(Backbone.View)});