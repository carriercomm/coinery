!function(){"use strict";var e="undefined"!=typeof window?window:global;if("function"!=typeof e.require){var t={},r={},n=function(e,t){return{}.hasOwnProperty.call(e,t)},o=function(e,t){var r,n,o=[];r=/^\.\.?(\/|$)/.test(t)?[e,t].join("/").split("/"):t.split("/");for(var i=0,s=r.length;s>i;i++)n=r[i],".."===n?o.pop():"."!==n&&""!==n&&o.push(n);return o.join("/")},i=function(e){return e.split("/").slice(0,-1).join("/")},s=function(t){return function(r){var n=i(t),s=o(n,r);return e.require(s,t)}},a=function(e,t){var n={id:e,exports:{}};return r[e]=n,t(n.exports,s(e),n),n.exports},u=function(e,i){var s=o(e,".");if(null==i&&(i="/"),n(r,s))return r[s].exports;if(n(t,s))return a(s,t[s]);var u=o(s,"./index");if(n(r,u))return r[u].exports;if(n(t,u))return a(u,t[u]);throw new Error('Cannot find module "'+e+'" from "'+i+'"')},c=function(e,r){if("object"==typeof e)for(var o in e)n(e,o)&&(t[o]=e[o]);else t[e]=r},p=function(){var e=[];for(var r in t)n(t,r)&&e.push(r);return e};e.require=u,e.require.define=c,e.require.register=c,e.require.list=p,e.require.brunch=!0}}(),require.register("app",function(e,t,r){var n,o,i;o=t("router"),i=t("models/user"),n=t("models/product"),r.exports={start:function(){var e,t;return t=new i({validated_session:!1}),e=function(){var e;return e=new o({user:t}),Backbone.history.start()},t.fetch({async:!1,success:function(){return t.setValidSession(),e()},error:function(){return e()}})}}}),require.register("collections/products",function(e,t,r){var n,o,i,s={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};n=t("models/product"),r.exports=o=function(e){function t(){return i=t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.url="/api/products",t.prototype.model=n,t.prototype.initialize=function(){},t}(Backbone.Collection)}),require.register("init",function(e,t){var r;r=t("app"),window.delay=function(e,t){return setTimeout(t,e)},window.coinbase_url="https://coinbase.com/oauth/authorize?client_id=ed71f78e7a89b542777e77d93dc44a33c02bab2c855a4e9919c7db5ad50edb6a&redirect_uri=http%3A%2F%2Flocalhost%3A3000api%2Fcoinbase%2Fauth%2Fcallback&response_type=code",window.debug=!(-1===window.location.hostname.indexOf("local")),console.log("DEBUG: "+window.debug),window.sexyHash=function(){var e;return e=function(t){var r;return"#"!==(r=t.charAt(0))&&"/"!==r?"/"+t:e(t.slice(1))},location.hash=e(location.hash)},window.sexyHash(),$(function(){return $.ajaxSetup({type:"POST",data:{},dataType:"json",crossDomain:!0,xhrFields:{withCredentials:!0}}),Backbone.$=jQuery,Pace.start(),r.start()})}),require.register("models/product",function(e,t,r){var n,o,i={}.hasOwnProperty,s=function(e,t){function r(){this.constructor=e}for(var n in t)i.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r.exports=n=function(e){function t(){return o=t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.url=function(){return"/api/products"},t.prototype.urlRoot=function(){return"/api/products"},t.prototype.defaults={title:"",description:"",price:"0"},t.prototype.initialize=function(){},t.prototype.setTitle=function(e){return this.set("title",e)},t.prototype.getTitle=function(){return this.get("title")},t.prototype.setPrice=function(e){return this.set("price",e)},t.prototype.getPrice=function(){return this.get("price")},t.prototype.getDescription=function(){return this.get("description")},t.prototype.setDescription=function(e){return this.set("description",e)},t.prototype.getReadableStatus=function(){var e;switch(e=this.get("status")){case 0:return"???";case 1:return"Draft";case 2:return"Draft";case 3:return"Live"}return"unkown"},t.prototype.setAssets=function(e){return this.set("assets",e)},t.prototype.getAssets=function(){return this.get("assets")},t.prototype.getAssetsFromServer=function(){var e=this;return $.ajax("/api/products/"+this.id+"/assets",{method:"GET",async:!1,success:function(t){return e.setAssets(t),e.trigger("fetched_assets")}})},t}(Backbone.Model)}),require.register("models/user",function(e,t,r){var n,o,i={}.hasOwnProperty,s=function(e,t){function r(){this.constructor=e}for(var n in t)i.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r.exports=n=function(e){function t(){return o=t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.url="/api/user",t.prototype.initialize=function(){},t.prototype.getName=function(){return this.get("full_name")},t.prototype.setValidSession=function(){return this.set("validated_session",!0)},t.prototype.getValidSession=function(){return this.get("validated_session")},t.prototype.getTwitterHandle=function(){return"@"+this.get("username")},t.prototype.getCoinbaseAuth=function(){return this.get("coinbase_auth")},t}(Backbone.Model)}),require.register("router",function(e,t,r){var n,o,i,s,a,u,c,p,l,d,f,h={}.hasOwnProperty,v=function(e,t){function r(){this.constructor=e}for(var n in t)h.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};d=t("views/nav"),p=t("views/products"),o=t("views/customers"),a=t("views/new"),n=t("views/account"),s=t("views/login"),i=t("views/edit"),c=t("collections/products"),u=t("models/product"),r.exports=l=function(e){function t(){return f=t.__super__.constructor.apply(this,arguments)}return v(t,e),t.prototype.routes=function(){return{products:"productsHandler","products/new":"newProductHandler","products/edit/:id":"editProductHandler",customers:"customersHandler",account:"accountHandler",login:"loginHandler","*a":"productsHandler"}},t.prototype.initialize=function(e){var t;return this.user=e.user,this.on("route",window.sexyHash),t=new d({model:this.user}),t.render(),this.on("route",function(e){return t.setActive(e.replace("Handler",""))}),this.view=null},t.prototype.loginHandler=function(){var e;return this.session()?this.productsHandler():(e=new s({model:this.user}),void this.loadView(e))},t.prototype.editProductHandler=function(e){var t;return this.session()?(this.requireConversionRate(),this.requireProducts(),t=new i({user:this.user,model:this.products.get(e)}),this.loadView(t)):void 0},t.prototype.productsHandler=function(){var e;return this.session()?(this.requireProducts(),e=new p({user:this.user,collection:this.products}),void this.loadView(e)):this.requireLogin()},t.prototype.customersHandler=function(){var e;return this.session()?(e=new o({model:this.user}),void this.loadView(e)):this.requireLogin()},t.prototype.accountHandler=function(){var e;return this.session()?(e=new n({model:this.user}),void this.loadView(e)):this.requireLogin()},t.prototype.newProductHandler=function(){var e,t;return this.session()?(this.requireConversionRate(),this.requireProducts(),e=new u,t=new a({collection:this.products,user:this.user,model:e}),void this.loadView(t)):this.requireLogin()},t.prototype.loadView=function(e){var t,r,n=this;return r=function(e){return e?$(".main-container").addClass("visible"):$(".main-container").removeClass("visible")},t=function(){return n.view=e,n.view.render(),r(!0)},null!=this.view&&r(!1),this.view?delay(210,function(){return n.view.undelegateEvents(),n.view.$el.html(""),t()}):(t(),void r(!0))},t.prototype.session=function(){return this.user.getValidSession()?!0:!1},t.prototype.requireLogin=function(){return Backbone.history.navigate("login",{trigger:!0})},t.prototype.requireProducts=function(){return null==this.products?(this.products=new c,this.products.fetch({async:!1})):void 0},t.prototype.requireConversionRate=function(){return null==window.conversion_rate?$.ajax("/api/coinbase/price",{async:!1,success:function(e){return window.conversion_rate=e}}):void 0},t}(Backbone.Router)}),require.register("templates/account",function(e,t,r){var n=Handlebars.template(function(e,t,r,n,o){return this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),o=o||{},"Manage your account here.\n"});"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof r&&r&&r.exports&&(r.exports=n)}),require.register("templates/customers",function(e,t,r){var n=Handlebars.template(function(e,t,r,n,o){return this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),o=o||{},'Check our your customers!\n<a href="/auth/twitter">Sign in with Twitta</a>\n\n'});"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof r&&r&&r.exports&&(r.exports=n)}),require.register("templates/dropzone-edit",function(e,t,r){var n=Handlebars.template(function(e,t,r,n,o){return this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),o=o||{},'<div class="dz-preview dz-file-preview">\n  <div class="dz-progress" style="display: block">\n    <span class="dz-upload" data-dz-uploadprogress>\n      <span data-dz-name class="filename"></span>\n    </span>\n  </div>\n  <div class="dz-details">\n    <div class="dz-filename"><span data-dz-name>myfile.png</span></div>\n  </div>\n  <a class="delete small" data-href="remove-file">Delete</a>\n  <span class="dz-size" data-dz-size></span>\n</div>\n\n'});"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof r&&r&&r.exports&&(r.exports=n)}),require.register("templates/dropzone",function(e,t,r){var n=Handlebars.template(function(e,t,r,n,o){return this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),o=o||{},'<div class="dz-preview dz-file-preview">\n  <div class="dz-progress" style="display: block">\n    <span class="dz-upload" data-dz-uploadprogress>\n      <span data-dz-name class="filename"></span>\n    </span>\n  </div>\n  <div class="dz-details">\n    <div class="dz-filename"><span data-dz-name>myfile.png</span></div>\n  </div>\n  <div class="dz-success-mark"><span><i class="fa fa-check"></i></span></div>\n  <div class="dz-error-mark"><span><i class="fa fa-exclamation-circle"></i></span></div>\n  <div class="dz-meta">\n    <span class="dz-size" data-dz-size></span><span class="dz-error-msg" data-dz-errormessage></span>\n  </div>\n  <span class="dz-progress-percent"></span>\n</div>\n\n'});"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof r&&r&&r.exports&&(r.exports=n)}),require.register("templates/edit",function(e,t,r){var n=Handlebars.template(function(e,t,r,n,o){function i(){return'\n  <a data-href="coinbase-auth" class="coinery-cta">\n    <img src="images/coinbase_cta@2x.png" width="603px" height="205px">\n  </a>\n  <br><br>\n'}this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),o=o||{};var s,a,u="",c=this,p="function",l=this.escapeExpression;return s=r.unless.call(t,t&&t.has_coinbase_auth,{hash:{},inverse:c.noop,fn:c.program(1,i,o),data:o}),(s||0===s)&&(u+=s),u+='\n\n<header style="width: 600px;">\n  <h2 class="left"><strong style="letter-spacing: -1px;">',(a=r.title)?s=a.call(t,{hash:{},data:o}):(a=t&&t.title,s=typeof a===p?a.call(t,{hash:{},data:o}):a),u+=l(s)+'</strong> </h2>\n  <a class="button small right" data-href="save">Save Draft</a>\n  <a class="button small gray right" data-href="publish">Publish</a>\n</header>\n\n<div class="overlay-container">\n</div>\n\n<div class="files-container">\n</div>\n\n'});"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof r&&r&&r.exports&&(r.exports=n)}),require.register("templates/files",function(e,t,r){var n=Handlebars.template(function(e,t,r,n,o){return this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),o=o||{},'<header>\n  <h4>Add/Edit Files</h4>\n  <p> Files your customer can download after a successful purchase</p>\n  <a class="button small gray right" data-href="trigger-dz">Add Files</a>\n</header>\n<div class="dz-preview-container edit-view"></div>\n<span class="or" style="display: none;"> or, </span>\n<a data-href="dropzone" class="button small">Upload Files</a>\n\n'});"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof r&&r&&r.exports&&(r.exports=n)}),require.register("templates/login",function(e,t,r){var n=Handlebars.template(function(e,t,r,n,o){return this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),o=o||{},'<h2><strong>Login with Twitter</strong> to get started.</h2>\n<p><strong>Make money online with no effort.</strong>\n  With Coinery, you can effortlessly sell products with Bitcoin\n  as the payment method. Get started by connecting your Twitter account!\n  We are here to help if you need us.\n</p>\n<br>\n<a class="button twitter" href="/auth/twitter">Login with Twitter <i class="fa fa-twitter"></i></a>\n'});"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof r&&r&&r.exports&&(r.exports=n)}),require.register("templates/nav",function(e,t,r){var n=Handlebars.template(function(e,t,r,n,o){return this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),o=o||{},'<div class="logo"></div>\n<ul>\n  <li><a data-href="products">Products</a></li>\n  <li><a data-href="customers">Customers</a></li>\n  <li><a data-href="account">Account</a></li>\n</ul>\n'});"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof r&&r&&r.exports&&(r.exports=n)}),require.register("templates/new",function(e,t,r){var n=Handlebars.template(function(e,t,r,n,o){return this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),o=o||{},'<a data-href="back" class="back">\n  <i class="fa fa-angle-left"></i> Back to Products\n</a>\n\n<div class="fieldset">\n  <h4><strong>Enter a name for a product</strong></h4>\n  <div class="field">\n    <input required class="wide" type="text" placeholder="What are you selling?">\n    <a class="button attached" data-href="save">Save</a>\n  </div>\n  <span class="hint"><em>ie. My Special Ebook, David\'s Debut Album</em></span>\n</div>\n\n<div class="fieldset hidden">\n  <h4><strong>How much does it cost?</strong></h4>\n  <div class="field">\n    <div class="field-wrapper" data-currency="USD">\n      <input required class="currency" type="text" placeholder="$0">\n    </div>\n    <div class="field-wrapper" data-currency="BTC">\n      <input required class="currency" type="text" placeholder="0.00">\n    </div>\n    <a class="button" data-href="save">Save</a>\n  </div>\n</div>\n\n<div class="fieldset hidden">\n  <h4><strong>Last step! Upload a file for your product</strong></h4>\n  <p class="hint">The customer will receive these files after a successful purchase.<p>\n  <div class="dz-preview-container"></div>\n  <a data-href="done" class="button" style="display: none;">I\'m Done!</a>\n  <span class="or" style="display: none;"> or, </span>\n  <a data-href="dropzone" class="button">Upload Files</a>\n</div>\n\n'});"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof r&&r&&r.exports&&(r.exports=n)}),require.register("templates/overlay",function(e,t,r){var n=Handlebars.template(function(e,t,r,n,o){function i(e,t){var n,o,i="";return i+='\n      <span class="status">',(o=r.status)?n=o.call(e,{hash:{},data:t}):(o=e&&e.status,n=typeof o===l?o.call(e,{hash:{},data:t}):o),i+=d(n)+"</span>\n    "}function s(e,t){var n,o,i="";return i+="\n        ",(o=r.description)?n=o.call(e,{hash:{},data:t}):(o=e&&e.description,n=typeof o===l?o.call(e,{hash:{},data:t}):o),i+=d(n)+"\n      "}function a(){return"\n        Add a description of your product...\n      "}this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),o=o||{};var u,c,p="",l="function",d=this.escapeExpression,f=this;return p+='<div class="overlay">\n  <div class="flag">\n    ',u=r["if"].call(t,t&&t.status,{hash:{},inverse:f.noop,fn:f.program(1,i,o),data:o}),(u||0===u)&&(p+=u),p+='\n    <img src="images/flag.svg" width="81" height="81">\n  </div>\n  <div class="cover">\n    <div class="cover-container">\n      <img class="cam" src="images/camera.svg"><br>\n      <a class="button dark" data-href="cover-dropzone">Upload Cover Photo<i class="fa fa-cloud-upload"></i></a>\n      <div style="display: none;" class="dz-cover-preview-container"></div>\n    </div>\n  </div>\n  <div class="product-main">\n    <div class="field-container">\n      <div class="title-container">\n        <input class="title" data-id="title" value="',(c=r.title)?u=c.call(t,{hash:{},data:o}):(c=t&&t.title,u=typeof c===l?c.call(t,{hash:{},data:o}):c),p+=d(u)+'">\n      </div>\n      <div class="price-container">\n        <div class="field-wrapper" data-currency="BTC">\n          <input class="btc" type="text">\n        </div>\n        <div class="field-wrapper" data-currency="USD">\n          <input class="usd" type="text">\n        </div>\n      </div>\n    </div>\n    <div class="description" contenteditable>\n      ',u=r["if"].call(t,t&&t.description,{hash:{},inverse:f.program(5,a,o),fn:f.program(3,s,o),data:o}),(u||0===u)&&(p+=u),p+="\n    </div>\n  </div>\n</div>\n\n"});"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof r&&r&&r.exports&&(r.exports=n)}),require.register("templates/products",function(e,t,r){var n=Handlebars.template(function(e,t,r,n,o){function i(e,t){var n,o="";return o+='\n  <header>\n    <h2 class="left">My Products</h2>\n    <a data-href="new-product" class="button small right">New Product</a>\n  </header>\n  <ul class="products-list">\n    ',n=r.each.call(e,e&&e.products,{hash:{},inverse:v.noop,fn:v.program(2,s,t),data:t}),(n||0===n)&&(o+=n),o+='\n    <li class="new">\n      <a class="cover" data-href="new-product">\n        <div class="product-cover">\n          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" width="42px" height="42px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve">\n          <polygon style="fill:#010101;" points="100,37.5 62.5,37.5 62.5,0 37.5,0 37.5,37.5 0,37.5 0,62.5 37.5,62.5 37.5,100 62.5,100   62.5,62.5 100,62.5 "/>\n          </svg>\n        </div>\n      </a>\n      <div class="product-meta">\n        <div class="title-container">\n          <h3 style="visibility: hidden;">New</h3>\n        </div>\n        <span class="status" style="visibility: hidden;">\n          Published\n        </span>\n      </div>\n    </li>\n</ul>\n'}function s(e,t){var n,o,i="";return i+='\n      <li class="product-container" data-product-id="',(o=r.id)?n=o.call(e,{hash:{},data:t}):(o=e&&e.id,n=typeof o===f?o.call(e,{hash:{},data:t}):o),i+=h(n)+'">\n        <a class="cover" data-href="edit-product">\n          <div class="product-cover">\n            <div class="price-container">\n              <h4>',(o=r.price)?n=o.call(e,{hash:{},data:t}):(o=e&&e.price,n=typeof o===f?o.call(e,{hash:{},data:t}):o),i+=h(n)+"</h4>\n            </div>\n            ",n=r["if"].call(e,(n=e&&e.product,null==n||n===!1?n:n.image),{hash:{},inverse:v.program(5,u,t),fn:v.program(3,a,t),data:t}),(n||0===n)&&(i+=n),i+='\n          </div>\n        </a>\n        <div class="product-meta">\n          <div class="dropdown">\n            <a class="dropdown-toggle">\n              <i class="fa fa-cog"></i>\n              <i class="fa fa-chevron-down"></i>\n            </a>\n            <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">\n              <li>\n                <a data-href="edit-product">\n                  Edit Product\n                </a>\n              </li>\n              <li>\n                <a data-href="delete">\n                  Delete\n                </a>\n              </li>\n            </ul>\n          </div>\n          <div class="title-container">\n            <h3>',(o=r.title)?n=o.call(e,{hash:{},data:t}):(o=e&&e.title,n=typeof o===f?o.call(e,{hash:{},data:t}):o),i+=h(n)+'</h3>\n          </div>\n          <span class="status">\n            Published\n          </span>\n        </div>\n      </li>\n    '}function a(e){var t,r="";return r+='\n              <img src="'+h((t=e&&e.product,t=null==t||t===!1?t:t.image,t=null==t||t===!1?t:t.url,typeof t===f?t.apply(e):t))+'">\n            '}function u(){return'\n              <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" width="70px" height="70px" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve">\n                <path id="package" d="M17.578,22.504l-1.758-4.129l-2.007,4.752l-7.519-3.289l0.174,3.905l9.437,4.374l10.91-5.365l-0.146-4.988  L17.578,22.504z M29.954,7.119L19.021,3.883l-3.006,2.671l-3.091-2.359L2.046,8.699l3.795,3.048l-3.433,5.302l10.879,4.758  l2.53-5.999l2.257,5.308l11.393-5.942l-3.105-4.709L29.954,7.119z M15.777,15.079l-9.059-3.83l9.275-4.101l9.608,3.255  L15.777,15.079z"/>\n              </svg>\n            '}function c(e,t){var n,o="";return o+='\n  <div class="prompt"></div>\n  <a data-href="products/new" class="button create-button">Create a Product<span class="plus">+</span></a>\n  <h2>\n    <strong>\n      Hey ',n=r["if"].call(e,e&&e.username,{hash:{},inverse:v.noop,fn:v.program(8,p,t),data:t}),(n||0===n)&&(o+=n),o+="!\n    </strong>\n    Welcome to Coinery\n  </h2>\n  <p>\n    Thanks for trying out Coinery.\n    With Coinery, you can <strong>effortlessly sell products with Bitcoin\n    as the payment method.</strong> Get started by creating your first\n    product! We are here to help if you need us.\n  </p>\n  <p>\n    - The Coinery Team\n  </p>\n\n"}function p(e,t){var n,o;return(o=r.username)?n=o.call(e,{hash:{},data:t}):(o=e&&e.username,n=typeof o===f?o.call(e,{hash:{},data:t}):o),h(n)}this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),o=o||{};var l,d="",f="function",h=this.escapeExpression,v=this;return l=r["if"].call(t,t&&t.products,{hash:{},inverse:v.program(7,c,o),fn:v.program(1,i,o),data:o}),(l||0===l)&&(d+=l),d+="\n\n\n\n\n"});"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof r&&r&&r.exports&&(r.exports=n)}),require.register("views/account",function(e,t,r){var n,o,i,s={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};o=t("templates/account"),r.exports=n=function(e){function t(){return i=t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.el=".content",t.prototype.events=function(){},t.prototype.initialize=function(){return this.user=this.model},t.prototype.render=function(){var e;return e={},this.$el.html(o(e))},t}(Backbone.View)}),require.register("views/customers",function(e,t,r){var n,o,i,s={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};o=t("templates/customers"),r.exports=n=function(e){function t(){return i=t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.el=".content",t.prototype.events=function(){return{"click a":"linkHandler"}},t.prototype.initialize=function(){return this.user=this.model},t.prototype.render=function(){var e;return e={},this.$el.html(o(e))},t.prototype.linkHandler=function(e){var t;return e.preventDefault(),t=$(e.target).attr("data-href"),Backbone.history.navigate(t)},t}(Backbone.View)}),require.register("views/edit",function(e,t,r){var n,o,i,s,a,u={}.hasOwnProperty,c=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};i=t("views/overlay"),o=t("views/files"),s=t("templates/edit"),r.exports=n=function(e){function t(){return a=t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.el=".content",t.prototype.events=function(){return{'click a[data-href="save"]':"saveHandler",'click a[data-href="publish"]':"publishHandler",'click a[data-href="coinbase-auth"]':"coinbaseAuthHandler"}},t.prototype.initialize=function(e){return this.user=e.user},t.prototype.render=function(){var e;return e={title:this.model.getTitle(),has_coinbase_auth:this.user.getCoinbaseAuth()},this.$el.html(s(e)),this.renderOverlay(),this.renderFiles()},t.prototype.publishHandler=function(e){return e.preventDefault(),console.log("handler called"),this.model.save("/api/products/"+this.model.get("id")+"/publish",{success:function(){return console.log("hey")}})},t.prototype.renderOverlay=function(){var e;return e=new i({user:this.user,model:this.model}),e.render()},t.prototype.renderFiles=function(){var e;return e=new o({user:this.user,model:this.model}),e.render()},t.prototype.coinbaseAuthHandler=function(e){return e.preventDefault(),window.location.href=window.coinbase_url},t}(Backbone.View)}),require.register("views/files",function(e,t,r){var n,o,i,s,a={}.hasOwnProperty,u=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};i=t("templates/files"),n=t("templates/dropzone-edit"),r.exports=o=function(e){function t(){return s=t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.el=".files-container",t.prototype.events=function(){return{'click a[data-href="remove-file"]':"fileDeleteHandler",'click a[data-href="trigger-dz"]':"triggerDropzoneHandler"}},t.prototype.initialize=function(e){return this.user=e.user,this.model.getAssetsFromServer()},t.prototype.render=function(){return this.$el.html(i({})),this.dropzoneInit()},t.prototype.triggerDropzoneHandler=function(e){return e.preventDefault(),console.log("trying this"),window.jQuery('a[data-href="dropzone"]')[0].click()},t.prototype.dropzoneInit=function(){var e,t,r,o,i,s,a,u,c,p=this;for(o=function(e){var t;return e>=Math.pow(1024,4)/10?(e/=Math.pow(1024,4)/10,t="TB"):e>=Math.pow(1024,3)/10?(e/=Math.pow(1024,3)/10,t="GB"):e>=Math.pow(1024,2)/10?(e/=Math.pow(1024,2)/10,t="MB"):e>=102.4?(e/=102.4,t="KB"):(e=10*e,t="b"),"<strong>"+Math.round(e)/10+"</strong>"+t},Dropzone.prototype.filesize=o,t=new Dropzone('a[data-href="dropzone"]',{paramName:"asset",previewsContainer:".dz-preview-container",previewTemplate:n({}),url:"#"}),s=function(){return"/api/products/"+p.model.get("id")+"/assets"},t.options.url=s(),c=this.model.getAssets(),a=0,u=c.length;u>a;a++)e=c[a],r={},r.name=e.asset_file_name,r.size=e.asset_file_size,r.id=e.id,t.emit("addedfile",r),t.emit("success",r),t.files.push(r);return i=function(){var e,n,o,i;for(o=t.files,i=[],e=0,n=o.length;n>e;e++)r=o[e],i.push(r.previewElement.setAttribute("data-file-id",r.id));return i},i(),t.on("success",function(e,t){return e.id=t.id,i()})},t.prototype.fileDeleteHandler=function(e){var t,r,n=this;return t=$(e.target).closest(".dz-preview"),r=t.attr("data-file-id"),$.ajax("/api/assets/"+r,{type:"DELETE",success:function(){return n.model.getAssetsFromServer(),n.render()}})},t.prototype.backHandler=function(){return Backbone.history.navigate("products",{trigger:!0})},t}(Backbone.View)}),require.register("views/login",function(e,t,r){var n,o,i,s={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};o=t("templates/login"),r.exports=n=function(e){function t(){return i=t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.el=".content",t.prototype.events=function(){},t.prototype.initialize=function(){return this.user=this.model},t.prototype.render=function(){return this.$el.html(o({}))},t}(Backbone.View)}),require.register("views/nav",function(e,t,r){var n,o,i,s={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};o=t("templates/nav"),r.exports=n=function(e){function t(){return i=t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.el=".nav-container",t.prototype.events=function(){return{"click a":"navHandler"}},t.prototype.initialize=function(){return this.user=this.model},t.prototype.render=function(){var e;return e={},this.$el.html(o(e))},t.prototype.navHandler=function(e){var t;return e.preventDefault(),t=$(e.target).attr("data-href"),Backbone.history.navigate(t,{trigger:!0})},t.prototype.setActive=function(e){return this.$("li").removeClass("current"),$("a[data-href="+e+"]").parent().addClass("current")},t}(Backbone.View)}),require.register("views/new",function(e,t,r){var n,o,i,s,a={}.hasOwnProperty,u=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};i=t("templates/new"),n=t("templates/dropzone"),r.exports=o=function(e){function t(){return s=t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.el=".content",t.prototype.events=function(){return{'click a[data-href="back"]':"backHandler",'click a[data-href="save"]':"saveHandler",'click a[data-href="done"]':"doneHandler","keyup input.currency":"currencyHandler","keydown input.currency":"currencyValidateHandler","focus input":"inputFocusHandler"}},t.prototype.initialize=function(e){return this.user=e.user},t.prototype.render=function(){return this.$el.html(i({})),this.postRender()},t.prototype.postRender=function(){return this.$("input").focus()},t.prototype.saveHandler=function(e){var t,r,n,o,i,s=this;if(e.preventDefault(),t=$(e.target).closest(".fieldset"),n=t.index(),r=0,t.find("[required]").each(function(e,t){return $(t).removeClass("error"),""===$(t).val()?($(t).addClass("error"),r++):void 0}),!(r>0)){switch(o=t.find("input").first().val(),n){case 1:this.model.setTitle(o);break;case 2:this.model.setPrice(o.replace("$","")),this.model.save({},{async:!1,success:function(){return s.dropzoneInit()},error:function(e,t){return console.log(e,t)}})}null!=(i=t.addClass("complete").next().removeClass("hidden").find("input"))&&i.first().focus()}return!1},t.prototype.inputFocusHandler=function(e){return $(e.target).closest(".fieldset").removeClass("complete")},t.prototype.currencyHandler=function(e){var t,r,n,o,i,s,a;if(190!==e.keyCode)return o={btc:$('[data-currency="BTC"] input'),usd:$('[data-currency="USD"] input')},n=$(e.target).parent().attr("data-currency"),i=window.conversion_rate,s=$(e.target).val().replace("$",""),t=parseFloat(s),"BTC"===n&&(a=t/i,isNaN(a)||(o.usd.addClass("changing"),delay(150,function(){return o.usd.val("$"+a.toString())}),delay(300,function(){return o.usd.removeClass("changing")}))),"USD"!==n||(r=t*i,isNaN(r)||(o.btc.addClass("changing"),delay(150,function(){return o.btc.val(r.toFixed(5))}),delay(300,function(){return o.btc.removeClass("changing")})),isNaN(t))?void 0:o.usd.val("$"+t.toString())},t.prototype.dropzoneInit=function(){var e,t,r,o=this;return t=function(e,t){var r,n,o,i,s;for(o=e.previewElement.querySelectorAll("[data-dz-uploadprogress]"),s=""+(100-parseInt(t))+"%",i=[],r=0;r<o.length;)n=o[r],i.push(n.style.width=s),r++;return i},e=function(e){var t;return e>=Math.pow(1024,4)/10?(e/=Math.pow(1024,4)/10,t="TB"):e>=Math.pow(1024,3)/10?(e/=Math.pow(1024,3)/10,t="GB"):e>=Math.pow(1024,2)/10?(e/=Math.pow(1024,2)/10,t="MB"):e>=102.4?(e/=102.4,t="KB"):(e=10*e,t="b"),"<strong>"+Math.round(e)/10+"</strong>"+t},Dropzone.prototype.defaultOptions.uploadprogress=t,Dropzone.prototype.filesize=e,this.dropzone=new Dropzone('a[data-href="dropzone"]',{paramName:"asset",previewsContainer:".dz-preview-container",previewTemplate:n({}),url:"#"}),r=function(){return"/api/products/"+o.model.get("id")+"/assets"},this.dropzone.options.url=r(),this.dropzone.on("uploadprogress",function(e,t){return $(".dz-progress-percent").text(Math.round(t)+"%")}),this.dropzone.on("addedFile",function(e){return console.log(e)}),this.dropzone.on("success",function(){return o.updateFileCTA()})},t.prototype.updateFileCTA=function(){return this.$('a[data-href="dropzone"]').removeClass("button").html("Upload Another File"),this.$("span.or").fadeIn(),this.$('a[data-href="done"]').fadeIn()},t.prototype.doneHandler=function(e){var t=this;return e.preventDefault(),this.collection.add(this.model),this.model.save({status:1},{url:"/api/products/"+this.model.id,success:function(){return Backbone.history.navigate("products/edit/"+t.model.id,{trigger:!0}),console.log(t.model)
}})},t.prototype.backHandler=function(){return Backbone.history.navigate("products",{trigger:!0})},t}(Backbone.View)}),require.register("views/overlay",function(e,t,r){var n,o,i,s={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};o=t("templates/overlay"),r.exports=n=function(e){function t(){return i=t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.el=".overlay-container",t.prototype.events=function(){return{"focus input":"inputFocusHandler","blur input":"resetFocus","click [contenteditable]":"contentEditableFocus","keyup .field-wrapper input":"currencyHandler","keydown .field-wrapper input":"currencyValidateHandler"}},t.prototype.initialize=function(e){return this.user=e.user},t.prototype.render=function(){var e;return e={id:this.model.id,title:this.model.getTitle(),description:this.model.getDescription(),price:this.model.getPrice(),user_name:this.user.getName(),status:this.model.getReadableStatus()},this.$el.html(o(e)),this.postRender()},t.prototype.postRender=function(){return this.dropzoneInit(),this.fillPrice()},t.prototype.fillPrice=function(){var e,t;return t=610,e=this.model.getPrice(),$('[data-currency="BTC"] input').val(""+parseFloat(e)*t),$('[data-currency="USD"] input').val("$"+parseFloat(e))},t.prototype.resetFocus=function(){return this.$(".price-container").removeClass("usd-focus btc-focus focus"),this.$(".field-container").removeClass("editing-price"),this.$(".title-container").removeClass("focus"),this.$(".description").removeClass("focus")},t.prototype.contentEditableFocus=function(e){return $(e.target).addClass("focus")},t.prototype.inputFocusHandler=function(e){var t;return this.resetFocus(),"usd"===(t=e.target.className)||"btc"===t?(this.$(".price-container").addClass(""+e.target.className+"-focus focus"),this.$(".field-container").addClass("editing-price")):this.$(".title-container").addClass("focus")},t.prototype.currencyHandler=function(e){var t,r,n,o,i,s,a;if(190!==e.keyCode)return o={btc:$('[data-currency="BTC"] input'),usd:$('[data-currency="USD"] input')},n=$(e.target).parent().attr("data-currency"),i=640,s=$(e.target).val().replace("$",""),t=parseFloat(s),"BTC"===n&&(a=640*t,isNaN(a)||(o.usd.addClass("changing"),console.log("changing"),delay(150,function(){return o.usd.val("$"+a.toString())}),delay(300,function(){return o.usd.removeClass("changing")}))),"USD"!==n||(r=t/640,isNaN(r)||(o.btc.addClass("changing"),delay(150,function(){return o.btc.val(r.toFixed(5))}),delay(300,function(){return o.btc.removeClass("changing")})),isNaN(t))?void 0:o.usd.val("$"+t.toString())},t.prototype.dropzoneInit=function(){var e;return e=new Dropzone('a[data-href="cover-dropzone"]',{previewsContainer:".dz-cover-preview-container",url:"/api/products/"+this.model.get("id"),paramName:"image",method:"put"}),e.on("uploadprogress",function(e,t){return $(".dz-progress-percent").text(Math.round(t)+"%")}),e.on("addedFile",function(e){return console.log(e)})},t.prototype.backHandler=function(){return Backbone.history.navigate("products",{trigger:!0})},t}(Backbone.View)}),require.register("views/products",function(e,t,r){var n,o,i,s={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};o=t("templates/products"),r.exports=n=function(e){function t(){return i=t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.el=".content",t.prototype.events=function(){return{"click a":"linkHandler",'click a[data-href="delete"]':"deleteHandler",'click a[data-href="edit-product"]':"editHandler",'click a[data-href="new-product"]':"newHandler"}},t.prototype.initialize=function(e){return this.user=e.user},t.prototype.render=function(){var e,t,r,n,i,s;for(e={username:this.user.getTwitterHandle(),products:[]},s=this.collection.models,n=0,i=s.length;i>n;n++)t=s[n],r={},r.id=t.id,r.title=t.getTitle(),r.price=t.getPrice(),e.products.push(r);return this.$el.html(o(e)),this.postRender()},t.prototype.postRender=function(){return this.$("ul.products-list li").each(function(e,t){return console.log("yes"),$(t).find(".dropdown-toggle").dropdown()})},t.prototype.deleteHandler=function(e){var t,r,n,o=this;return e.preventDefault(),t=$(e.target).closest("li.product-container"),r=t.attr("data-product-id"),n=this.collection.get(r),n.destroy({url:"/api/products/"+r,success:function(){return o.collection.remove(n),t.fadeOut()}})},t.prototype.newHandler=function(){return Backbone.history.navigate("products/new",{trigger:!0})},t.prototype.editHandler=function(e){var t;return e.preventDefault(),t=$(e.target).closest("li.product-container").attr("data-product-id"),Backbone.history.navigate("products/edit/"+t,{trigger:!0})},t.prototype.linkHandler=function(e){var t;return e.preventDefault(),t=$(e.target).attr("data-href"),Backbone.history.navigate(t,{trigger:!0})},t}(Backbone.View)});